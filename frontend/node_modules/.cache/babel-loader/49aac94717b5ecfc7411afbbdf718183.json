{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/msi/Desktop/Web Dev/MERN Stack/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/msi/Desktop/Web Dev/MERN Stack/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/msi/Desktop/Web Dev/MERN Stack/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useWorkoutsContext}from\"../hooks/useWorkoutsContext\";import{useAuthContext}from\"../hooks/useAuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var WorkoutForm=function WorkoutForm(){var _useWorkoutsContext=useWorkoutsContext(),dispatch=_useWorkoutsContext.dispatch;var _useAuthContext=useAuthContext(),user=_useAuthContext.user;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),load=_useState4[0],setLoad=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),reps=_useState6[0],setReps=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),emptyFields=_useState10[0],setEmptyFields=_useState10[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var workout,response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(user){_context.next=4;break;}setError('You must be logged in');return _context.abrupt(\"return\");case 4:workout={title:title,load:load,reps:reps};_context.next=7;return fetch('/api/workouts',{method:'POST',body:JSON.stringify(workout),headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(user.token)}});case 7:response=_context.sent;_context.next=10;return response.json();case 10:json=_context.sent;if(!response.ok){setError(json.error);setEmptyFields(json.emptyFields);}if(response.ok){setTitle('');setLoad('');setReps('');setError(null);setEmptyFields([]);console.log(\"New workout added\");dispatch({type:'CREATE_WORKOUT',payload:json});}case 13:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{className:\"create\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add a New Workout\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Exercise Title: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setTitle(e.target.value);},value:title,className:emptyFields.includes('title')?'error':''}),/*#__PURE__*/_jsx(\"label\",{children:\"Load (in kg): \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:function onChange(e){return setLoad(e.target.value);},value:load,className:emptyFields.includes('load')?'error':''}),/*#__PURE__*/_jsx(\"label\",{children:\"Reps: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:function onChange(e){return setReps(e.target.value);},value:reps,className:emptyFields.includes('reps')?'error':''}),/*#__PURE__*/_jsx(\"button\",{children:\"Add Workout\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error})]});};export default WorkoutForm;","map":{"version":3,"names":["useState","useWorkoutsContext","useAuthContext","WorkoutForm","dispatch","user","title","setTitle","load","setLoad","reps","setReps","error","setError","emptyFields","setEmptyFields","handleSubmit","e","preventDefault","workout","fetch","method","body","JSON","stringify","headers","token","response","json","ok","console","log","type","payload","target","value","includes"],"sources":["C:/Users/msi/Desktop/Web Dev/MERN Stack/frontend/src/components/WorkoutForm.js"],"sourcesContent":["import { useState } from \"react\"\r\nimport { useWorkoutsContext } from \"../hooks/useWorkoutsContext\"\r\nimport { useAuthContext } from \"../hooks/useAuthContext\"\r\n\r\nconst WorkoutForm = () =>{\r\n    const {dispatch} = useWorkoutsContext()\r\n    const {user} = useAuthContext()\r\n\r\n    const [title,setTitle] = useState('')\r\n    const [load,setLoad] = useState('')\r\n    const [reps,setReps] = useState('')\r\n    const [error,setError] = useState(null)\r\n    const [emptyFields,setEmptyFields] = useState([])\r\n\r\n    const handleSubmit = async(e)=>{\r\n        e.preventDefault()\r\n\r\n        if(!user){\r\n            setError('You must be logged in')\r\n            return \r\n        }\r\n\r\n        const workout = {title,load,reps}\r\n\r\n        const response = await fetch('/api/workouts',{\r\n            method: 'POST',\r\n            body: JSON.stringify(workout),\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${user.token}`\r\n            }\r\n        })\r\n\r\n        const json = await response.json()\r\n\r\n        if(!response.ok){\r\n            setError(json.error)\r\n            setEmptyFields(json.emptyFields)\r\n        }\r\n        if(response.ok){\r\n            setTitle('')\r\n            setLoad('')\r\n            setReps('')\r\n            setError(null)\r\n            setEmptyFields([])\r\n            console.log(\"New workout added\")\r\n            dispatch({type: 'CREATE_WORKOUT', payload: json})\r\n        }\r\n    }\r\n\r\n    return(\r\n        <form className=\"create\" onSubmit={handleSubmit}>\r\n            <h3>Add a New Workout</h3>\r\n\r\n            <label>Exercise Title: </label>\r\n            <input \r\n            type='text' \r\n            onChange={(e)=>setTitle(e.target.value)}\r\n            value={title}\r\n            className={emptyFields.includes('title') ? 'error' : ''}\r\n            />\r\n\r\n            <label>Load (in kg): </label>\r\n            <input \r\n            type='number' \r\n            onChange={(e)=>setLoad(e.target.value)}\r\n            value={load}\r\n            className={emptyFields.includes('load') ? 'error' : ''}\r\n            />\r\n\r\n            <label>Reps: </label>\r\n            <input \r\n            type='number' \r\n            onChange={(e)=>setReps(e.target.value)}\r\n            value={reps}\r\n            className={emptyFields.includes('reps') ? 'error' : ''}\r\n            />\r\n\r\n            <button>Add Workout</button>\r\n            {error && <div className=\"error\">{error}</div>}\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default WorkoutForm"],"mappings":"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"},"metadata":{},"sourceType":"module"}